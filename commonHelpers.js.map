{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n    countDownEl: document.querySelector('.timer'),\n    daysEl: document.querySelector('[data-days]'),\n    hoursEl: document.querySelector('[data-hours]'),\n    minutesEl: document.querySelector('[data-minutes]'),\n    secondsEl: document.querySelector('[data-seconds]'),\n    startBtnEl: document.querySelector('[data-start]'),\n    inputDateEl: document.querySelector('#datetime-picker'),\n  };\n  let intervalId = null;\n  let userSelectedDate = [];\n\n  refs.startBtnEl.disabled = true;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      const nowDate = Date.now()\n      if(userSelectedDate < nowDate) {\n        iziToast.show(\n         {message: 'Please choose a date in the future',\n          messageColor: 'white',\n          color: 'red',\n          theme: 'dark',\n          position: 'topCenter',\n          progressBar: false,\n        }\n      );\n      } else {\n        refs.startBtnEl.disabled = false;\n      }\n    },\n  };\n  \n  flatpickr(refs.inputDateEl, options);\n\n  const timer = {\n    start() {\n        const startTime = userSelectedDate;\n        intervalId = setInterval(() => {\n            const currentTime = Date.now();\n            const deltaTime = startTime - currentTime;\n           \n            if (deltaTime <= 0) {\n                clearInterval(intervalId);\n                refs.inputDateEl.disabled = false;\n                return;\n            }\n    \n            const time = convertMs(deltaTime);\n            updateCountdown(time);\n            refs.startBtnEl.disabled = true;\n            refs.inputDateEl.disabled = true;\n        }, 1000);\n    }\n  }\n  refs.startBtnEl.addEventListener('click', () => {\n    timer.start();\n  });\n\n  function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    const days = pad(Math.floor(ms / day));\n    const hours = pad(Math.floor((ms % day) / hour));\n    const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n    const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n  \n    return { days, hours, minutes, seconds };\n  }\n \n  function updateCountdown({ days, hours, minutes, seconds }) {\n    refs.daysEl.textContent = `${days}`;\n    refs.hoursEl.textContent = `${hours}`;\n    refs.minutesEl.textContent = `${minutes}`;\n    refs.secondsEl.textContent = `${seconds}`;\n  }\n\n  function pad(value) {\n        return String(value).padStart(2, '0'); \n      }\n    \n\n \n  "],"names":["refs","intervalId","userSelectedDate","options","selectedDates","nowDate","iziToast","flatpickr","timer","startTime","currentTime","deltaTime","time","convertMs","updateCountdown","ms","days","pad","hours","minutes","seconds","value"],"mappings":"2GAKA,MAAMA,EAAO,CACT,YAAa,SAAS,cAAc,QAAQ,EAC5C,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,cAAc,EAC9C,UAAW,SAAS,cAAc,gBAAgB,EAClD,UAAW,SAAS,cAAc,gBAAgB,EAClD,WAAY,SAAS,cAAc,cAAc,EACjD,YAAa,SAAS,cAAc,kBAAkB,CAC1D,EACE,IAAIC,EAAa,KACbC,EAAmB,CAAA,EAEvBF,EAAK,WAAW,SAAW,GAE7B,MAAMG,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAClC,MAAMC,EAAU,KAAK,IAAK,EACvBH,EAAmBG,EACpBC,EAAS,KACR,CAAC,QAAS,qCACT,aAAc,QACd,MAAO,MACP,MAAO,OACP,SAAU,YACV,YAAa,EACd,CACT,EAEQN,EAAK,WAAW,SAAW,EAE9B,CACL,EAEEO,EAAUP,EAAK,YAAaG,CAAO,EAEnC,MAAMK,EAAQ,CACZ,OAAQ,CACJ,MAAMC,EAAYP,EAClBD,EAAa,YAAY,IAAM,CAC3B,MAAMS,EAAc,KAAK,MACnBC,EAAYF,EAAYC,EAE9B,GAAIC,GAAa,EAAG,CAChB,cAAcV,CAAU,EACxBD,EAAK,YAAY,SAAW,GAC5B,MACH,CAED,MAAMY,EAAOC,EAAUF,CAAS,EAChCG,EAAgBF,CAAI,EACpBZ,EAAK,WAAW,SAAW,GAC3BA,EAAK,YAAY,SAAW,EAC/B,EAAE,GAAI,CACV,CACF,EACDA,EAAK,WAAW,iBAAiB,QAAS,IAAM,CAC9CQ,EAAM,MAAK,CACf,CAAG,EAED,SAASK,EAAUE,EAAI,CAKrB,MAAMC,EAAOC,EAAI,KAAK,MAAMF,EAAK,KAAG,CAAC,EAC/BG,EAAQD,EAAI,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EACzCI,EAAUF,EAAI,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EACtDK,EAAUH,EAAI,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,SAASN,EAAgB,CAAE,KAAAE,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DpB,EAAK,OAAO,YAAc,GAAGgB,CAAI,GACjChB,EAAK,QAAQ,YAAc,GAAGkB,CAAK,GACnClB,EAAK,UAAU,YAAc,GAAGmB,CAAO,GACvCnB,EAAK,UAAU,YAAc,GAAGoB,CAAO,EACxC,CAED,SAASH,EAAII,EAAO,CACd,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CAC5C"}